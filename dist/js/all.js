"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var s=t[r];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,s.key,s)}}function _createClass(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_nonIterableSpread()}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function _iterableToArray(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function _arrayWithoutHoles(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}var deck=document.querySelector(".deck"),restart=document.querySelector(".restart"),cardDef={nr:1,symbols_def:["chevron-circle-left","clock","check-circle","dragon","eye","compass","adjust","cloud-sun"],createCards:function(){var e=document.createDocumentFragment(),t=shuffle([].concat(_toConsumableArray(this.symbols_def),_toConsumableArray(this.symbols_def))),r=!0,s=!1,n=void 0;try{for(var a,o=t[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){var i=a.value;e.appendChild(this.createCard(i))}}catch(e){s=!0,n=e}finally{try{r||null==o.return||o.return()}finally{if(s)throw n}}this.nr=1,deck.appendChild(e),setTimeout(this.startCards,0)},createCard:function(e){var t=document.createElement("div");return t.classList.add("card"),t.classList.add("n"+this.nr),t.innerHTML='<div class="fas fa-'.concat(e,'"></div>'),this.nr++,t},startCards:function(){document.querySelectorAll(".card").forEach(function(e){e.classList.toggle("start")})},openCard:function(e){e.classList.toggle("open"),this.flipCard(e.classList.item(1),180)},closeCards:function(e){var t=!0,r=!1,s=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){var o=n.value;o.classList.toggle("open"),o.classList.toggle("nomatch"),this.flipCard(o.classList.item(1),0)}}catch(e){r=!0,s=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw s}}},flipCard:function(e,t){document.documentElement.style.setProperty("--"+e,t+"deg")}},scoresDef={score_node:document.querySelector(".score-panel"),stars_node:document.querySelector(".stars"),stars_def:[30,40,50,60,70],stars_cur:0,open_card_list:[],shakePanel:function(){this.score_node.classList.toggle("animated"),this.score_node.classList.toggle("shake")}},Counter=function(){function n(e){var t=e.node,r=e.step,s=void 0===r?1:r;_classCallCheck(this,n),this.step=s,this.node=t,this.moves_cur=0}return _createClass(n,[{key:"get",value:function(){return this.moves_cur}},{key:"add",value:function(){return this.moves_cur+=this.step,this.set(),this.moves_cur}},{key:"reset",value:function(){return this.moves_cur=0,this.set(),this.moves_cur}},{key:"set",value:function(){this.node.textContent=this.moves_cur}}]),n}(),moves=new Counter({node:document.querySelector(".moves")}),scores=function(){var e=document.querySelector(".matched"),t=0;return{get:function(){return t},add:function(){return t+=2,this.set(),t},reset:function(){return t=0,this.set(),t},set:function(){e.textContent=t}}}(),timeDef={time_node:document.querySelector(".time"),time_sec:0,time_min:0,time_started:!1,time_interval:"",s_pref:function(){return this.time_sec<10?"0":""},m_pref:function(){return this.time_min<10?"0":""},start:function(){var e=this;this.time_started=!0,this.time_interval=setInterval(function(){e.HTML(),e.tick()},1e3)},reset:function(){clearInterval(this.time_interval),this.time_started=!1,this.time_min=0,this.time_sec=0,this.HTML()},HTML:function(){this.time_node.innerHTML=this.m_pref()+this.time_min+":"+this.s_pref()+this.time_sec},tick:function(){this.time_sec++,60==this.time_sec&&(this.time_min++,this.time_sec=0)}};function removeChilds(e){for(;e.firstChild;)e.removeChild(e.firstChild)}function shuffle(e){for(var t,r,s=e.length;0!==s;)r=Math.floor(Math.random()*s),t=e[s-=1],e[s]=e[r],e[r]=t;return e}function playSound(e){if("complete"==document.readyState){var t=document.querySelector("audio[data-key='".concat(e,"']"));if(!t)return;t.volume=.25,t.currentTime=0,t.play()}}function checkMatch(e){if(!(scoresDef.open_card_list.length<=1||2<scoresDef.open_card_list.length)){var t=e.querySelector(".fas"),r=scoresDef.open_card_list[0].querySelector(".fas");t.classList.value===r.classList.value?updateMatch(scoresDef.open_card_list):updateNoMatch(scoresDef.open_card_list),scoresDef.open_card_list=[]}}function updateNoMatch(e){scoresDef.shakePanel(),playSound("bad");var t=!0,r=!1,s=void 0;try{for(var n,a=e[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){n.value.classList.toggle("nomatch")}}catch(e){r=!0,s=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw s}}setTimeout(function(){cardDef.closeCards(e),playSound("flip"),scoresDef.shakePanel()},1e3)}function updateMatch(a){scores.add(),playSound("ok"),setTimeout(function(){var e=!0,t=!1,r=void 0;try{for(var s,n=a[Symbol.iterator]();!(e=(s=n.next()).done);e=!0){s.value.classList.toggle("match")}}catch(e){t=!0,r=e}finally{try{e||null==n.return||n.return()}finally{if(t)throw r}}showMatchWin()},1e3)}function clickCard(e){var t=e.target;!timeDef.time_started&&timeDef.start(),!t.classList.contains("card")||t.classList.contains("nomatch")||t.classList.contains("match")||(cardDef.openCard(t),playSound("flip"),scoresDef.open_card_list.push(t),checkMatch(t),moves.add(),updateStars())}function showMatchWin(){16===scores.get()&&(console.log("win win"),setTimeout(function(){showScores()},1e3))}function showScores(){clearInterval(timeDef.time_interval),cardDef.startCards();var e=document.createElement("div");e.classList.add("win");var t=moves.get(),r=scoresDef.stars_node.innerHTML,s=timeDef.time_node.textContent;e.innerHTML="<span><strong>YOU ARE A WINNNER !!!</strong></span>\n                            <div>Your moves: ".concat(t,'</div>\n                            <div class="stars">Stars: ').concat(r,"</div>\n                            <div>Time: ").concat(s,'</div>\n                            <div class="sco_restart">\n                                <i class="fa fa-redo-alt"></i>\n                            </div>'),deck.appendChild(e),document.querySelector(".sco_restart").addEventListener("click",restartGame),playSound("win")}function setStars(){removeChilds(scoresDef.stars_node);var e=document.createElement("span"),t="",r=!0,s=!1,n=void 0;try{for(var a,o=scoresDef.stars_def[Symbol.iterator]();!(r=(a=o.next()).done);r=!0){a.value>moves.get()?t+='<div><i class="fas fa-star"></i></div>':t+='<div><i class="far fa-star"></i></div>'}}catch(e){s=!0,n=e}finally{try{r||null==o.return||o.return()}finally{if(s)throw n}}e.innerHTML=t,scoresDef.stars_node.appendChild(e)}function updateStars(){var e=0,t=!0,r=!1,s=void 0;try{for(var n,a=scoresDef.stars_def[Symbol.iterator]();!(t=(n=a.next()).done);t=!0){n.value<moves.get()&&(e+=1)}}catch(e){r=!0,s=e}finally{try{t||null==a.return||a.return()}finally{if(r)throw s}}scoresDef.stars_cur<e&&(scoresDef.stars_cur=e,setStars())}function restartGame(){removeChilds(deck),cardDef.createCards(),moves.reset(),scores.reset(),setStars(),timeDef.reset()}restartGame(),restart.addEventListener("click",restartGame),deck.addEventListener("click",clickCard);
//# sourceMappingURL=all.js.map
